--- 2016-06-04 13:20:28.444 [           main] ERROR org.moqui.impl.context.ExecutionContextFactoryImpl [] []
 Error initializing ToolFactory ElasticSearch
java.lang.IllegalArgumentException: Plugin [lang-groovy] is incompatible with Elasticsearch [2.3.2]. Was designed for version [2.3.3]
	at org.elasticsearch.plugins.PluginInfo.readFromProperties(PluginInfo.java:118) ~[moqui-2.0.0.war:2.3.2]
	at org.elasticsearch.plugins.PluginsService.getModuleBundles(PluginsService.java:335) ~[moqui-2.0.0.war:2.3.2]
	at org.elasticsearch.plugins.PluginsService.<init>(PluginsService.java:114) ~[moqui-2.0.0.war:2.3.2]
	at org.elasticsearch.node.Node.<init>(Node.java:158) ~[moqui-2.0.0.war:2.3.2]
	at org.elasticsearch.node.Node.<init>(Node.java:140) ~[moqui-2.0.0.war:2.3.2]
	at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:143) ~[moqui-2.0.0.war:2.3.2]
	at org.elasticsearch.node.NodeBuilder.node(NodeBuilder.java:150) ~[moqui-2.0.0.war:2.3.2]
	at org.moqui.impl.tools.ElasticSearchToolFactory.init(ElasticSearchToolFactory.groovy:49) ~[moqui-2.0.0.war:2.0.0]
	at org.moqui.impl.context.ExecutionContextFactoryImpl.postFacadeInit(ExecutionContextFactoryImpl.groovy:402) [moqui-2.0.0.war:2.0.0]
	at org.moqui.impl.context.ExecutionContextFactoryImpl.<init>(ExecutionContextFactoryImpl.groovy:189) [moqui-2.0.0.war:2.0.0]
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[?:1.8.0_66]
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) [?:1.8.0_66]
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) [?:1.8.0_66]
	at java.lang.reflect.Constructor.newInstance(Constructor.java:422) [?:1.8.0_66]
	at java.lang.Class.newInstance(Class.java:442) [?:1.8.0_66]
	at java.util.ServiceLoader$LazyIterator.nextService(ServiceLoader.java:380) [?:1.8.0_66]
	at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:404) [?:1.8.0_66]
	at java.util.ServiceLoader$1.next(ServiceLoader.java:480) [?:1.8.0_66]
	at org.moqui.Moqui.loadData(Moqui.java:79) [moqui-2.0.0.war:2.0.0]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_66]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_66]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_66]
	at java.lang.reflect.Method.invoke(Method.java:497) ~[?:1.8.0_66]
	at MoquiStart.main(MoquiStart.java:110) [moqui-2.0.0.war:?]
--- 2016-06-04 13:22:12.093 [           main] ERROR org.moqui.impl.context.ExecutionContextFactoryImpl [] []
 Error initializing ToolFactory ElasticSearch
java.lang.IllegalArgumentException: Plugin [lang-groovy] is incompatible with Elasticsearch [2.3.2]. Was designed for version [2.3.3]
	at org.elasticsearch.plugins.PluginInfo.readFromProperties(PluginInfo.java:118) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.plugins.PluginsService.getModuleBundles(PluginsService.java:335) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.plugins.PluginsService.<init>(PluginsService.java:114) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.node.Node.<init>(Node.java:158) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.node.Node.<init>(Node.java:140) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:143) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.node.NodeBuilder.node(NodeBuilder.java:150) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.moqui.impl.tools.ElasticSearchToolFactory.init(ElasticSearchToolFactory.groovy:49) ~[moqui-framework-2.0.0.jar:2.0.0]
	at org.moqui.impl.context.ExecutionContextFactoryImpl.postFacadeInit(ExecutionContextFactoryImpl.groovy:402) [moqui-framework-2.0.0.jar:2.0.0]
	at org.moqui.impl.context.ExecutionContextFactoryImpl.<init>(ExecutionContextFactoryImpl.groovy:189) [moqui-framework-2.0.0.jar:2.0.0]
	at org.moqui.impl.webapp.MoquiContextListener.contextInitialized(MoquiContextListener.groovy:67) [moqui-framework-2.0.0.jar:2.0.0]
	at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:837) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:532) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:810) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:344) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1379) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1341) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:772) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:261) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:517) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:132) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.Server.start(Server.java:405) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:106) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:61) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.Server.doStart(Server.java:372) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [moqui-2.0.0.war:9.3.8.v20160314]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_66]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_66]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_66]
	at java.lang.reflect.Method.invoke(Method.java:497) ~[?:1.8.0_66]
	at MoquiStart.main(MoquiStart.java:164) [moqui-2.0.0.war:?]
--- 2016-06-04 13:55:45.968 [           main] ERROR org.moqui.impl.context.ExecutionContextFactoryImpl [] []
 Error initializing ToolFactory ElasticSearch
java.lang.IllegalArgumentException: Plugin [lang-groovy] is incompatible with Elasticsearch [2.3.2]. Was designed for version [2.3.3]
	at org.elasticsearch.plugins.PluginInfo.readFromProperties(PluginInfo.java:118) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.plugins.PluginsService.getModuleBundles(PluginsService.java:335) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.plugins.PluginsService.<init>(PluginsService.java:114) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.node.Node.<init>(Node.java:158) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.node.Node.<init>(Node.java:140) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:143) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.node.NodeBuilder.node(NodeBuilder.java:150) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.moqui.impl.tools.ElasticSearchToolFactory.init(ElasticSearchToolFactory.groovy:49) ~[moqui-framework-2.0.0.jar:2.0.0]
	at org.moqui.impl.context.ExecutionContextFactoryImpl.postFacadeInit(ExecutionContextFactoryImpl.groovy:402) [moqui-framework-2.0.0.jar:2.0.0]
	at org.moqui.impl.context.ExecutionContextFactoryImpl.<init>(ExecutionContextFactoryImpl.groovy:189) [moqui-framework-2.0.0.jar:2.0.0]
	at org.moqui.impl.webapp.MoquiContextListener.contextInitialized(MoquiContextListener.groovy:67) [moqui-framework-2.0.0.jar:2.0.0]
	at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:837) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:532) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:810) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:344) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1379) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1341) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:772) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:261) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:517) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:132) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.Server.start(Server.java:405) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:106) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:61) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.Server.doStart(Server.java:372) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [moqui-2.0.0.war:9.3.8.v20160314]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_66]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_66]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_66]
	at java.lang.reflect.Method.invoke(Method.java:497) ~[?:1.8.0_66]
	at MoquiStart.main(MoquiStart.java:164) [moqui-2.0.0.war:?]
--- 2016-06-04 14:01:26.408 [           main] ERROR org.moqui.impl.context.ExecutionContextFactoryImpl [] []
 Error initializing ToolFactory ElasticSearch
java.lang.IllegalArgumentException: Plugin [lang-groovy] is incompatible with Elasticsearch [2.3.2]. Was designed for version [2.3.3]
	at org.elasticsearch.plugins.PluginInfo.readFromProperties(PluginInfo.java:118) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.plugins.PluginsService.getModuleBundles(PluginsService.java:335) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.plugins.PluginsService.<init>(PluginsService.java:114) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.node.Node.<init>(Node.java:158) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.node.Node.<init>(Node.java:140) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:143) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.node.NodeBuilder.node(NodeBuilder.java:150) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.moqui.impl.tools.ElasticSearchToolFactory.init(ElasticSearchToolFactory.groovy:49) ~[moqui-framework-2.0.0.jar:2.0.0]
	at org.moqui.impl.context.ExecutionContextFactoryImpl.postFacadeInit(ExecutionContextFactoryImpl.groovy:402) [moqui-framework-2.0.0.jar:2.0.0]
	at org.moqui.impl.context.ExecutionContextFactoryImpl.<init>(ExecutionContextFactoryImpl.groovy:189) [moqui-framework-2.0.0.jar:2.0.0]
	at org.moqui.impl.webapp.MoquiContextListener.contextInitialized(MoquiContextListener.groovy:67) [moqui-framework-2.0.0.jar:2.0.0]
	at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:837) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:532) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:810) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:344) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1379) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1341) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:772) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:261) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:517) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:132) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.Server.start(Server.java:405) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:106) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:61) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.Server.doStart(Server.java:372) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [moqui-2.0.0.war:9.3.8.v20160314]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_66]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_66]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_66]
	at java.lang.reflect.Method.invoke(Method.java:497) ~[?:1.8.0_66]
	at MoquiStart.main(MoquiStart.java:164) [moqui-2.0.0.war:?]
--- 2016-06-04 14:14:11.361 [           main] ERROR org.moqui.impl.context.ExecutionContextFactoryImpl [] []
 Error initializing ToolFactory ElasticSearch
java.lang.IllegalArgumentException: Plugin [lang-groovy] is incompatible with Elasticsearch [2.3.2]. Was designed for version [2.3.3]
	at org.elasticsearch.plugins.PluginInfo.readFromProperties(PluginInfo.java:118) ~[moqui-2.0.0.war:2.3.2]
	at org.elasticsearch.plugins.PluginsService.getModuleBundles(PluginsService.java:335) ~[moqui-2.0.0.war:2.3.2]
	at org.elasticsearch.plugins.PluginsService.<init>(PluginsService.java:114) ~[moqui-2.0.0.war:2.3.2]
	at org.elasticsearch.node.Node.<init>(Node.java:158) ~[moqui-2.0.0.war:2.3.2]
	at org.elasticsearch.node.Node.<init>(Node.java:140) ~[moqui-2.0.0.war:2.3.2]
	at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:143) ~[moqui-2.0.0.war:2.3.2]
	at org.elasticsearch.node.NodeBuilder.node(NodeBuilder.java:150) ~[moqui-2.0.0.war:2.3.2]
	at org.moqui.impl.tools.ElasticSearchToolFactory.init(ElasticSearchToolFactory.groovy:49) ~[moqui-2.0.0.war:2.0.0]
	at org.moqui.impl.context.ExecutionContextFactoryImpl.postFacadeInit(ExecutionContextFactoryImpl.groovy:402) [moqui-2.0.0.war:2.0.0]
	at org.moqui.impl.context.ExecutionContextFactoryImpl.<init>(ExecutionContextFactoryImpl.groovy:189) [moqui-2.0.0.war:2.0.0]
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[?:1.8.0_66]
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) [?:1.8.0_66]
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) [?:1.8.0_66]
	at java.lang.reflect.Constructor.newInstance(Constructor.java:422) [?:1.8.0_66]
	at java.lang.Class.newInstance(Class.java:442) [?:1.8.0_66]
	at java.util.ServiceLoader$LazyIterator.nextService(ServiceLoader.java:380) [?:1.8.0_66]
	at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:404) [?:1.8.0_66]
	at java.util.ServiceLoader$1.next(ServiceLoader.java:480) [?:1.8.0_66]
	at org.moqui.Moqui.loadData(Moqui.java:79) [moqui-2.0.0.war:2.0.0]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_66]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_66]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_66]
	at java.lang.reflect.Method.invoke(Method.java:497) ~[?:1.8.0_66]
	at MoquiStart.main(MoquiStart.java:110) [moqui-2.0.0.war:?]
--- 2016-06-04 14:20:58.667 [   RequireNewTx] ERROR                   org.moqui.impl.actions.XmlAction [] []
 Error running groovy script (java.lang.IllegalStateException: ElasticSearchToolFactory not initialized): 
1 : import org.moqui.impl.StupidUtilities
2 : // these are in the context by default: ExecutionContext ec, Map<String, Object> context, Map<String, Object> result
3 : 
4 :     // begin inline script
5 :     import org.elasticsearch.client.Client
6 :                 import org.elasticsearch.action.get.GetResponse
7 :                 import org.elasticsearch.action.index.IndexResponse
8 :                 import org.slf4j.Logger
9 :                 import org.slf4j.LoggerFactory
10 :                 import org.moqui.context.ExecutionContext
11 : 
12 :                 ExecutionContext ec = context.ec
13 :                 Client elasticSearchClient = ec.getTool("ElasticSearch", Client.class)
14 :                 Logger logger = LoggerFactory.getLogger("org.moqui.impl.EntityServices.indexDataDocuments")
15 : 
16 :                 // Make sure all indices exist
17 :                 Set indexNames = new HashSet()
18 :                 for (Map document in documentList) indexNames.add(document._index)
19 :                 for (String indexName in indexNames) {
20 :                     ec.entity.getEntityDataDocument().checkCreateIndex(indexName)
21 :                 }
22 : 
23 :                 documentVersionList = []
24 :                 originalDocumentList = getOriginalDocuments ? [] : null
25 :                 for (Map document in documentList) {
26 :                     // logger.warn("====== Indexing document: ${document}")
27 : 
28 :                     String _index = document._index
29 :                     String _type = document._type
30 :                     String _id = document._id
31 :                     String _timestamp = document._timestamp
32 :                     // As of ES 2.0 _index, _type, _id, and _timestamp shouldn't be in document to be indexed
33 :                     document.remove('_index'); document.remove('_type'); document.remove('_id');
34 :                     document.remove('_timestamp');
35 : 
36 :                     if (getOriginalDocuments) {
37 :                         // this may fail for a number of reasons, like index doesn't exist yet, so catch the exception
38 :                         try {
39 :                             GetResponse gr = elasticSearchClient.prepareGet(_index, _type, _id).execute().actionGet()
40 :                             Map originalDocument = gr.getSourceAsMap()
41 :                             if (originalDocument != null) {
42 :                                 // As of ES 2.0 _index, _type, _id aren't included in the document
43 :                                 originalDocument._index = gr.getIndex()
44 :                                 originalDocument._type = gr.getType()
45 :                                 originalDocument._id = gr.getId()
46 :                                 // how to get timestamp? doesn't seem to be in API: document._timestamp = hit.get?
47 :                                 originalDocument._version = gr.getVersion()
48 :                                 originalDocumentList.add(originalDocument ?: [:])
49 :                             } else {
50 :                                 originalDocumentList.add([:])
51 :                             }
52 :                         } catch (Exception e) {
53 :                             logger.info("Could not get original document for [${_index}, ${_type}, ${_id}]: ${e.toString()}")
54 :                             originalDocumentList.add([:])
55 :                         }
56 :                     }
57 :                     // Groovy DSL version
58 :                     // IndexResponse response = elasticSearchClient.index { index document._index; type document._type;
59 :                     //     id document._id; source document; }.actionGet()
60 :                     // Java API version
61 :                     IndexResponse response = elasticSearchClient.prepareIndex(_index, _type, _id)
62 :                             .setIndex(_index).setType(_type).setId(_id).setTimestamp(_timestamp)
63 :                             .setSource(document).execute().actionGet()
64 : 
65 :                     documentVersionList.add(response.getVersion())
66 :                     if (logger.isTraceEnabled()) logger.trace("Indexed [${_index}, ${_type}, ${_id}] version [${response.getVersion()}]")
67 :                     // logger.warn("====== Indexed [${_index}, ${_type}, ${_id}] version [${response.getVersion()}] created? ${response.isCreated()}}")
68 :                 }
69 :     // end inline script
70 : // make sure the last statement is not considered the return value
71 : return;


--- 2016-06-04 14:43:49.120 [           main] ERROR org.moqui.impl.context.ExecutionContextFactoryImpl [] []
 Error initializing ToolFactory ElasticSearch
java.lang.IllegalArgumentException: Plugin [lang-groovy] is incompatible with Elasticsearch [2.3.2]. Was designed for version [2.3.3]
	at org.elasticsearch.plugins.PluginInfo.readFromProperties(PluginInfo.java:118) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.plugins.PluginsService.getModuleBundles(PluginsService.java:335) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.plugins.PluginsService.<init>(PluginsService.java:114) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.node.Node.<init>(Node.java:158) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.node.Node.<init>(Node.java:140) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:143) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.elasticsearch.node.NodeBuilder.node(NodeBuilder.java:150) ~[elasticsearch-2.3.2.jar:2.3.2]
	at org.moqui.impl.tools.ElasticSearchToolFactory.init(ElasticSearchToolFactory.groovy:49) ~[moqui-framework-2.0.0.jar:2.0.0]
	at org.moqui.impl.context.ExecutionContextFactoryImpl.postFacadeInit(ExecutionContextFactoryImpl.groovy:402) [moqui-framework-2.0.0.jar:2.0.0]
	at org.moqui.impl.context.ExecutionContextFactoryImpl.<init>(ExecutionContextFactoryImpl.groovy:189) [moqui-framework-2.0.0.jar:2.0.0]
	at org.moqui.impl.webapp.MoquiContextListener.contextInitialized(MoquiContextListener.groovy:67) [moqui-framework-2.0.0.jar:2.0.0]
	at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:837) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:532) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:810) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:344) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1379) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1341) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:772) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:261) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:517) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:132) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.Server.start(Server.java:405) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:106) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:61) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.server.Server.doStart(Server.java:372) [moqui-2.0.0.war:9.3.8.v20160314]
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68) [moqui-2.0.0.war:9.3.8.v20160314]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_66]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_66]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_66]
	at java.lang.reflect.Method.invoke(Method.java:497) ~[?:1.8.0_66]
	at MoquiStart.main(MoquiStart.java:164) [moqui-2.0.0.war:?]
